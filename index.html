<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Snake Game | SnowMan YT</title>

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#050b1a;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  touch-action: none; 
}
canvas{display:block}
#footer{
  position:fixed;
  bottom:10px;
  width:100%;
  text-align:center;
  color:#aaa;
  font-size:13px;
  pointer-events: none;
}
#ui{
  position:fixed;
  top:15px;
  right:15px;
  display: flex;
  gap: 15px;
  align-items: center;
  z-index: 10;
}
#score-board {
  color: #00ffd5;
  font-weight: bold;
  font-size: 20px;
  text-shadow: 0 0 10px rgba(0, 255, 213, 0.5);
}
button{
  background:#00ffd5;
  border:none;
  padding:8px 16px;
  border-radius:20px;
  cursor:pointer;
  font-weight:600;
  box-shadow: 0 0 10px rgba(0, 255, 213, 0.3);
}
#overlay {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(5, 11, 26, 0.9);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 100;
  color: white;
}
#overlay h1 { color: #00ffd5; margin-bottom: 10px; }
</style>
</head>

<body>

<div id="overlay">
  <h1>SNAKE NEON</h1>
  <p>Tap or Press Any Key to Start with Sound</p>
  <button onclick="startGame()">START GAME</button>
</div>

<canvas id="game"></canvas>

<div id="ui">
  <div id="score-board">Score: 0</div>
  <button id="muteBtn" onclick="toggleSound()">ðŸ”Š Sound: ON</button>
</div>

<div id="footer">Game developed by @ SnowMan YT</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const scoreElement = document.getElementById("score-board");
const overlay = document.getElementById("overlay");
const muteBtn = document.getElementById("muteBtn");

// AUDIO SETUP
const sounds = {
  bgm: new Audio('https://codeskulptor-demos.commondatastorage.googleapis.com/descent/background%20music.mp3'),
  eat: new Audio('https://codeskulptor-demos.commondatastorage.googleapis.com/pang/pop.mp3'),
  bossAppear: new Audio('https://codeskulptor-demos.commondatastorage.googleapis.com/descent/got_item.mp3'),
  bossEat: new Audio('https://codeskulptor-demos.commondatastorage.googleapis.com/descent/Crumble%20Sound.mp3'),
  dead: new Audio('https://codeskulptor-demos.commondatastorage.googleapis.com/pyman/die.ogg')
};

sounds.bgm.loop = true;
sounds.bgm.volume = 0.3;

let snake=[], dir={x:1,y:0}, speed=3.2;
let food={}, bossFood=null, foodCount=0, bossTimer=0;
let soundEnabled=false;
let score = 0;
let gameOver = false;
let gameStarted = false;

function startGame() {
  gameStarted = true;
  soundEnabled = true;
  overlay.style.display = "none";
  sounds.bgm.play().catch(e => console.log("Audio blocked"));
  initGame();
}

function toggleSound() {
  soundEnabled = !soundEnabled;
  if(soundEnabled) {
    sounds.bgm.play();
    muteBtn.innerText = "ðŸ”Š Sound: ON";
  } else {
    sounds.bgm.pause();
    muteBtn.innerText = "ðŸ”ˆ Sound: OFF";
  }
}

function playSFX(name) {
  if(soundEnabled && sounds[name]) {
    const s = sounds[name].cloneNode();
    s.volume = 0.6;
    s.play().catch(() => {});
  }
}

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

function initGame() {
  snake = [];
  dir = {x:1, y:0};
  score = 0;
  foodCount = 0;
  gameOver = false;
  scoreElement.innerText = `Score: ${score}`;
  for(let i=0;i<20;i++){
    snake.push({x:canvas.width/2-i*10, y:canvas.height/2, wrap:false});
  }
  spawnFood();
}

function spawnFood(){
  food={x:Math.random()*(canvas.width-60)+30, y:Math.random()*(canvas.height-60)+30};
}

function spawnBossFood(){
  bossFood={x:Math.random()*(canvas.width-60)+30, y:Math.random()*(canvas.height-60)+30};
  bossTimer=400; 
  playSFX('bossAppear');
}

function setDir(x,y){
  if(x===-dir.x && y===-dir.y) return;
  dir={x,y};
}

document.addEventListener("keydown",e=>{
  if(!gameStarted) { startGame(); return; }
  if(gameOver) { initGame(); return; }
  if(e.key==="ArrowUp") setDir(0,-1);
  if(e.key==="ArrowDown") setDir(0,1);
  if(e.key==="ArrowLeft") setDir(-1,0);
  if(e.key==="ArrowRight") setDir(1,0);
});

let touchStart=null;
canvas.addEventListener("touchstart",e=>{
  if(!gameStarted) { startGame(); return; }
  if(gameOver) initGame();
  touchStart=e.touches[0];
}, {passive: false});

canvas.addEventListener("touchend",e=>{
  if(!touchStart) return;
  const t=e.changedTouches[0];
  const dx=t.clientX-touchStart.clientX;
  const dy=t.clientY-touchStart.clientY;
  if(Math.abs(dx) > 10 || Math.abs(dy) > 10) {
    Math.abs(dx)>Math.abs(dy) ? setDir(dx>0?1:-1,0) : setDir(0,dy>0?1:-1);
  }
});

function update(){
  if(!gameStarted || gameOver) return;

  const head = snake[0];
  let x = head.x + dir.x * speed;
  let y = head.y + dir.y * speed;
  let wrapped = false;

  if(x<0){x+=canvas.width; wrapped=true;}
  else if(x>canvas.width){x-=canvas.width; wrapped=true;}
  if(y<0){y+=canvas.height; wrapped=true;}
  else if(y>canvas.height){y-=canvas.height; wrapped=true;}

  for(let i=25; i<snake.length; i++){
    if(Math.hypot(x-snake[i].x, y-snake[i].y) < 8){
      gameOver = true;
      playSFX('dead');
      return;
    }
  }

  snake.unshift({x,y,wrap:wrapped});
  snake.pop();

  if(Math.hypot(x-food.x,y-food.y)<22){
    for(let i=0; i<4; i++) snake.push({...snake.at(-1)});
    score += 10;
    foodCount++;
    scoreElement.innerText = `Score: ${score}`;
    playSFX('eat');
    spawnFood();
    if(foodCount % 5 === 0) spawnBossFood();
  }

  if(bossFood){
    bossTimer--;
    if(Math.hypot(x-bossFood.x,y-bossFood.y)<28){
      for(let i=0;i<15;i++) snake.push({...snake.at(-1)});
      score += 100;
      scoreElement.innerText = `Score: ${score}`;
      bossFood=null;
      playSFX('bossEat');
    }
    if(bossTimer<=0) bossFood=null;
  }
}

function drawSnake(){
  ctx.lineWidth=18;
  ctx.lineJoin=ctx.lineCap="round";
  const grad=ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
  grad.addColorStop(0,"#00ffd5");
  grad.addColorStop(1,"#0055ff");
  ctx.strokeStyle=grad;

  ctx.beginPath();
  ctx.moveTo(snake[0].x, snake[0].y);

  for(let i=1; i<snake.length; i++){
    if(snake[i-1].wrap){
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(snake[i].x, snake[i].y);
    } else {
      ctx.lineTo(snake[i].x, snake[i].y);
    }
  }
  ctx.stroke();

  const h=snake[0];
  ctx.fillStyle="#00ffe1";
  ctx.beginPath();
  ctx.arc(h.x,h.y,12,0,Math.PI*2);
  ctx.fill();

  const a=Math.atan2(dir.y,dir.x);
  ctx.fillStyle="#fff";
  for(let s of [-1,1]){
    ctx.beginPath();
    ctx.arc(h.x+Math.cos(a+0.5*s)*7, h.y+Math.sin(a+0.5*s)*7, 3, 0, Math.PI*2);
    ctx.fill();
  }
}

function draw(){
  ctx.fillStyle = "#050b1a";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  if(!gameStarted) return;

  if(gameOver){
    ctx.fillStyle = "white";
    ctx.textAlign = "center";
    ctx.font = "bold 40px system-ui";
    ctx.fillText("GAME OVER", canvas.width/2, canvas.height/2);
    ctx.font = "20px system-ui";
    ctx.fillText(`Final Score: ${score}`, canvas.width/2, canvas.height/2 + 40);
    ctx.fillStyle = "#00ffd5";
    ctx.fillText("Tap to Restart", canvas.width/2, canvas.height/2 + 80);
    return;
  }

  // Food
  ctx.fillStyle="#ff4757";
  ctx.shadowBlur=15;
  ctx.shadowColor="#ff4757";
  ctx.beginPath();
  ctx.arc(food.x,food.y,8,0,Math.PI*2);
  ctx.fill();

  if(bossFood){
    ctx.fillStyle="#ffd700";
    ctx.shadowBlur=20;
    ctx.shadowColor="#ffd700";
    ctx.beginPath();
    ctx.arc(bossFood.x,bossFood.y,16,0,Math.PI*2);
    ctx.fill();
    ctx.shadowBlur=0;
    ctx.fillStyle="#fff";
    ctx.font="bold 14px monospace";
    ctx.textAlign="center";
    ctx.fillText(Math.ceil(bossTimer/60),bossFood.x,bossFood.y-25);
  }
  
  ctx.shadowBlur=0;
  drawSnake();
}

function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
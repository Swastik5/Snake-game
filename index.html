<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Game | SnowMan YT</title>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:#050b1f;
  overflow:hidden;
  font-family:system-ui;
}
canvas{display:block}
#ui{
  position:fixed;
  top:10px;
  left:50%;
  transform:translateX(-50%);
  color:#00eaff;
  font-weight:bold;
  font-size:18px;
}
#sound{
  position:fixed;
  top:10px;
  right:15px;
  font-size:22px;
  color:#00eaff;
  cursor:pointer;
}

/* ðŸ‘‡ CREDIT */
#credit{
  position:fixed;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  color:#6ff;
  font-size:13px;
  opacity:0.8;
  letter-spacing:0.5px;
}
</style>
</head>

<body>

<div id="ui">Score: <span id="score">0</span></div>
<div id="sound">ðŸ”Š</div>
<div id="credit"> Game developed by @ <b>SnowMan YT</b></div>

<canvas id="game"></canvas>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
const scoreEl=document.getElementById("score");
const soundBtn=document.getElementById("sound");

function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}
addEventListener("resize",resize);
resize();

const SIZE=20;
let COLS,ROWS;
function grid(){
  COLS=Math.floor(canvas.width/SIZE);
  ROWS=Math.floor(canvas.height/SIZE);
}
grid();

let snake,food,power,dir,nextDir,score,speed,shield;
let soundOn=true;

/* ðŸ”Š SOUNDS */
const sounds={
  eat:new Audio("https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.wav"),
  power:new Audio("https://assets.mixkit.co/sfx/preview/mixkit-video-game-mystery-alert-234.wav"),
  dead:new Audio("https://assets.mixkit.co/sfx/preview/mixkit-player-losing-or-failing-2042.wav")
};

/* ðŸŽµ BACKGROUND MUSIC */
const bgMusic=new Audio("https://assets.mixkit.co/music/preview/mixkit-retro-game-emergency-alarm-1000.mp3");
bgMusic.loop=true;
bgMusic.volume=0.35;

soundBtn.onclick=()=>{
  soundOn=!soundOn;
  soundBtn.textContent=soundOn?"ðŸ”Š":"ðŸ”‡";
  soundOn?bgMusic.play():bgMusic.pause();
};

function play(s){
  if(soundOn) sounds[s].play();
}

function spawn(){
  return {x:Math.random()*COLS|0,y:Math.random()*ROWS|0};
}

function reset(){
  grid();
  snake=[{x:COLS/2|0,y:ROWS/2|0}];
  dir=nextDir={x:1,y:0};
  food=spawn();
  power=null;
  score=0;
  speed=10;
  shield=false;
  scoreEl.textContent=0;
}

function spawnPower(){
  const types=["speed","shield","bonus"];
  power={...spawn(),type:types[Math.random()*3|0],timer:300};
}

function setDir(x,y){
  if(dir.x+x===0&&dir.y+y===0)return;
  nextDir={x,y};
}

addEventListener("keydown",e=>{
  if(e.key==="ArrowUp")setDir(0,-1);
  if(e.key==="ArrowDown")setDir(0,1);
  if(e.key==="ArrowLeft")setDir(-1,0);
  if(e.key==="ArrowRight")setDir(1,0);
});

let sx=0,sy=0;
addEventListener("touchstart",e=>{
  sx=e.touches[0].clientX;
  sy=e.touches[0].clientY;
  if(soundOn) bgMusic.play();
});
addEventListener("touchend",e=>{
  let dx=e.changedTouches[0].clientX-sx;
  let dy=e.changedTouches[0].clientY-sy;
  Math.abs(dx)>Math.abs(dy)?setDir(dx>0?1:-1,0):setDir(0,dy>0?1:-1);
});

let last=0,acc=0;
function update(){
  dir=nextDir;
  let h={x:snake[0].x+dir.x,y:snake[0].y+dir.y};

  if(h.x<0)h.x=COLS-1;
  if(h.x>=COLS)h.x=0;
  if(h.y<0)h.y=ROWS-1;
  if(h.y>=ROWS)h.y=0;

  if(snake.some(s=>s.x===h.x&&s.y===h.y)){
    if(shield){shield=false;return;}
    play("dead");reset();return;
  }

  snake.unshift(h);

  if(h.x===food.x&&h.y===food.y){
    score++;scoreEl.textContent=score;
    play("eat");
    food=spawn();
    if(Math.random()<0.3)spawnPower();
  }else snake.pop();

  if(power){
    power.timer--;
    if(h.x===power.x&&h.y===power.y){
      play("power");
      if(power.type==="speed")speed=18;
      if(power.type==="shield")shield=true;
      if(power.type==="bonus"){score+=5;scoreEl.textContent=score;}
      power=null;
    }
    if(power&&power.timer<=0)power=null;
  }
}

function draw(){
  ctx.fillStyle="#050b1f";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle="#ff2d55";
  ctx.shadowBlur=15;
  ctx.fillRect(food.x*SIZE,food.y*SIZE,SIZE,SIZE);

  if(power){
    ctx.fillStyle=power.type==="speed"?"#00eaff":power.type==="shield"?"#ffd700":"#6fff9f";
    ctx.fillRect(power.x*SIZE,power.y*SIZE,SIZE,SIZE);
  }

  snake.forEach((p,i)=>{
    ctx.fillStyle=i===0?"#00eaff":shield?"#ffd700":"#6fff9f";
    ctx.fillRect(p.x*SIZE,p.y*SIZE,SIZE,SIZE);
  });
  ctx.shadowBlur=0;
}

function loop(t){
  if(!last)last=t;
  acc+=(t-last)/1000;
  last=t;
  while(acc>1/speed){update();acc-=1/speed;}
  draw();
  requestAnimationFrame(loop);
}

reset();
requestAnimationFrame(loop);
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Game | SnowMan YT</title>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:#050b1f;
  overflow:hidden;
  font-family:system-ui;
}
canvas{display:block}

#ui{
  position:fixed;
  top:10px;
  left:50%;
  transform:translateX(-50%);
  color:#00eaff;
  font-weight:bold;
  font-size:18px;
}
#sound{
  position:fixed;
  top:10px;
  right:15px;
  font-size:22px;
  cursor:pointer;
  color:#00eaff;
}
#credit{
  position:fixed;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  color:#6ff;
  font-size:13px;
  opacity:.85;
}
</style>
</head>

<body>

<div id="ui">Score: <span id="score">0</span></div>
<div id="sound">ðŸ”Š</div>
<div id="credit">Game developed by @ <b>SnowMan YT</b></div>

<canvas id="game"></canvas>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
const scoreEl=document.getElementById("score");
const soundBtn=document.getElementById("sound");

function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}
addEventListener("resize",resize);
resize();

const CELL=18;
let COLS=canvas.width/CELL;
let ROWS=canvas.height/CELL;

let snake=[],dir={x:1,y:0},nextDir={x:1,y:0};
let food={},bossFood=null,particles=[];
let score=0,eatCount=0,speed=6;
let soundOn=true;

/* AUDIO */
const eatSound=new Audio("https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.wav");
const bgMusic=new Audio("https://assets.mixkit.co/music/preview/mixkit-retro-game-emergency-alarm-1000.mp3");
bgMusic.loop=true; bgMusic.volume=.35;

soundBtn.onclick=()=>{
  soundOn=!soundOn;
  soundBtn.textContent=soundOn?"ðŸ”Š":"ðŸ”‡";
  soundOn?bgMusic.play():bgMusic.pause();
};
const playEat=()=>soundOn&&eatSound.play();

/* SPAWN */
const rand=()=>Math.random();
function spawnFood(){
  food={x:rand()*COLS,y:rand()*ROWS,pulse:0};
}
function spawnBossFood(){
  bossFood={
    x:rand()*COLS,
    y:rand()*ROWS,
    time:6, // seconds
    pulse:0
  };
}

/* RESET */
function reset(){
  snake=[{x:COLS/2,y:ROWS/2}];
  dir=nextDir={x:1,y:0};
  spawnFood(); bossFood=null;
  score=0; eatCount=0;
  scoreEl.textContent=0;
}
reset();

/* INPUT */
function setDir(x,y){
  if(dir.x+x===0&&dir.y+y===0)return;
  nextDir={x,y};
}
addEventListener("keydown",e=>{
  if(e.key==="ArrowUp")setDir(0,-1);
  if(e.key==="ArrowDown")setDir(0,1);
  if(e.key==="ArrowLeft")setDir(-1,0);
  if(e.key==="ArrowRight")setDir(1,0);
});
let sx=0,sy=0;
addEventListener("touchstart",e=>{
  sx=e.touches[0].clientX; sy=e.touches[0].clientY;
  if(soundOn) bgMusic.play();
});
addEventListener("touchend",e=>{
  let dx=e.changedTouches[0].clientX-sx;
  let dy=e.changedTouches[0].clientY-sy;
  Math.abs(dx)>Math.abs(dy)?setDir(dx>0?1:-1,0):setDir(0,dy>0?1:-1);
});

/* PARTICLES */
function spawnParticles(x,y,n,c){
  for(let i=0;i<n;i++){
    particles.push({
      x,y,
      vx:(rand()-.5)*5,
      vy:(rand()-.5)*5,
      life:1,
      color:c
    });
  }
}

/* LOOP */
let last=0;
function loop(t){
  if(!last)last=t;
  const dt=(t-last)/1000;
  last=t;
  update(dt);
  draw();
  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

/* UPDATE */
function update(dt){
  dir=nextDir;
  const h={...snake[0]};
  h.x+=dir.x*speed*dt;
  h.y+=dir.y*speed*dt;

  if(h.x<0)h.x+=COLS;
  if(h.y<0)h.y+=ROWS;
  if(h.x>=COLS)h.x-=COLS;
  if(h.y>=ROWS)h.y-=ROWS;

  snake.unshift(h);

  /* NORMAL FOOD */
  if(Math.hypot(h.x-food.x,h.y-food.y)<0.6){
    score++; eatCount++;
    scoreEl.textContent=score;
    playEat();
    spawnParticles(food.x*CELL,food.y*CELL,12,"#ff2d55");
    spawnFood();
    if(eatCount%5===0)spawnBossFood();
  } else snake.pop();

  /* BOSS FOOD */
  if(bossFood){
    bossFood.time-=dt;
    bossFood.pulse+=dt*4;
    if(Math.hypot(h.x-bossFood.x,h.y-bossFood.y)<0.9){
      score+=5;
      scoreEl.textContent=score;
      spawnParticles(bossFood.x*CELL,bossFood.y*CELL,30,"#ffd700");
      bossFood=null;
    }
    if(bossFood && bossFood.time<=0) bossFood=null;
  }

  particles.forEach(p=>{
    p.x+=p.vx; p.y+=p.vy; p.life-=dt;
  });
  particles=particles.filter(p=>p.life>0);

  food.pulse+=dt*4;
}

/* DRAW */
function draw(){
  ctx.fillStyle="#050b1f";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  /* FOOD */
  const fp=Math.sin(food.pulse)*3+CELL/2;
  ctx.fillStyle="#ff2d55";
  ctx.beginPath();
  ctx.arc(food.x*CELL,food.y*CELL,(CELL+fp)/2,0,Math.PI*2);
  ctx.fill();

  /* BOSS FOOD + TIMER */
  if(bossFood){
    const bp=Math.sin(bossFood.pulse)*6+CELL;
    ctx.fillStyle="#ffd700";
    ctx.shadowBlur=25;
    ctx.beginPath();
    ctx.arc(bossFood.x*CELL,bossFood.y*CELL,bp,0,Math.PI*2);
    ctx.fill();
    ctx.shadowBlur=0;

    // DIGITAL TIMER
    const t=Math.max(0,bossFood.time);
    const sec=Math.floor(t);
    const text=`00:${sec.toString().padStart(2,"0")}`;
    ctx.font="bold 14px monospace";
    ctx.textAlign="center";
    ctx.fillStyle=sec<=2?"#ff3333":"#ffffff";
    ctx.fillText(text,bossFood.x*CELL,bossFood.y*CELL-bp-8);
  }

  /* PARTICLES */
  particles.forEach(p=>{
    ctx.fillStyle=`rgba(255,200,100,${p.life})`;
    ctx.fillRect(p.x,p.y,4,4);
  });

  /* BODY */
  ctx.lineWidth=CELL;
  ctx.lineCap="round";
  ctx.strokeStyle="#6fff9f";
  ctx.beginPath();
  snake.forEach((s,i)=>{
    const x=s.x*CELL,y=s.y*CELL;
    i===0?ctx.moveTo(x,y):ctx.lineTo(x,y);
  });
  ctx.stroke();

  /* HEAD + EYES */
  const h=snake[0];
  const hx=h.x*CELL,hy=h.y*CELL;
  ctx.fillStyle="#00eaff";
  ctx.beginPath();
  ctx.arc(hx,hy,CELL/1.7,0,Math.PI*2);
  ctx.fill();

  const ex=dir.x*6,ey=dir.y*6;
  ctx.fillStyle="#fff";
  ctx.beginPath();
  ctx.arc(hx+ex-ey/2,hy+ey+ex/2,3,0,Math.PI*2);
  ctx.arc(hx+ex+ey/2,hy+ey-ex/2,3,0,Math.PI*2);
  ctx.fill();
}
</script>

</body>
</html>
